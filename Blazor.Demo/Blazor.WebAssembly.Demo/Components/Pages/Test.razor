@page "/test"
@using Services;
@inject FooService FooService

<PageTitle>Home</PageTitle>

<h1>Test</h1>

<p></p>

<p>@FooService.GetInfo()</p>

<p role="status">Current count: @currentCount</p>
<button class="btn btn-primary" @onclick="ThrowEx">Throw</button>
<button class="btn btn-primary" @onclick="ThrowExAsync">ThrowAsync</button>

@code {
    private int currentCount = 0;

    private void ThrowEx()
    {
        _ = FooService.ThrowAsync();   
        //_ = ThrowExceptionAsync();
    }

    public async Task ThrowExAsync()
    {        
        try
        {
            await ThrowExceptionAsync();
        }
        catch (Exception ex)
        {
            await DispatchExceptionAsync(ex);
        }       
    }

    private async Task ThrowExceptionAsync()
    {
        try
        {
            await FooService.ThrowAsync();
        }
        catch (Exception ex)
        {
            await DispatchExceptionAsync(ex);
        }
    }
}